<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1080px" preserveAspectRatio="none" style="width:540px;height:1080px;" version="1.1" viewBox="0 0 540 1080" width="540px" zoomAndPan="magnify"><defs><filter height="300%" id="fj2iq7kdcx0b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="321.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="204" y="209.8281"/><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="219.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="204" y="708.8203"/><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="445.8594" style="stroke: #000000; stroke-width: 2.0;" width="481" x="38" y="132.4297"/><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="278.1953" style="stroke: #000000; stroke-width: 2.0;" width="373" x="136" y="224.8281"/><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="160.6641" style="stroke: #000000; stroke-width: 2.0;" width="268" x="146" y="335.3594"/><rect fill="#FFFFFF" height="44.1328" style="stroke: none; stroke-width: 1.0;" width="268" x="146" y="451.8906"/><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="344.4609" style="stroke: #000000; stroke-width: 2.0;" width="491" x="38" y="631.4219"/><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="176.7969" style="stroke: #000000; stroke-width: 2.0;" width="383" x="136" y="723.8203"/><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="103.5313" style="stroke: #000000; stroke-width: 2.0;" width="363" x="146" y="790.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="35" x2="35" y1="86.2969" y2="992.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="109" x2="109" y1="86.2969" y2="992.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="209" x2="209" y1="86.2969" y2="992.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="425" x2="425" y1="86.2969" y2="992.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="8" y="82.9951">Worker</text><ellipse cx="35.5" cy="13" fill="#FEFECE" filter="url(#fj2iq7kdcx0b)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M35.5,21 L35.5,48 M22.5,29 L48.5,29 M35.5,48 L22.5,63 M35.5,48 L48.5,63 " fill="none" filter="url(#fj2iq7kdcx0b)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="8" y="1004.8779">Worker</text><ellipse cx="35.5" cy="1018.1797" fill="#FEFECE" filter="url(#fj2iq7kdcx0b)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M35.5,1026.1797 L35.5,1053.1797 M22.5,1034.1797 L48.5,1034.1797 M35.5,1053.1797 L22.5,1068.1797 M35.5,1053.1797 L48.5,1068.1797 " fill="none" filter="url(#fj2iq7kdcx0b)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fj2iq7kdcx0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="73" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="80" y="70.9951">Director</text><rect fill="#FEFECE" filter="url(#fj2iq7kdcx0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="73" y="991.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="80" y="1011.8779">Director</text><rect fill="#FEFECE" filter="url(#fj2iq7kdcx0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="156" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="163" y="70.9951">Cache Driver</text><rect fill="#FEFECE" filter="url(#fj2iq7kdcx0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="156" y="991.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="163" y="1011.8779">Cache Driver</text><rect fill="#FEFECE" filter="url(#fj2iq7kdcx0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="351" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="358" y="70.9951">Build Cache Server</text><rect fill="#FEFECE" filter="url(#fj2iq7kdcx0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="351" y="991.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="358" y="1011.8779">Build Cache Server</text><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="321.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="204" y="209.8281"/><rect fill="#FFFFFF" filter="url(#fj2iq7kdcx0b)" height="219.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="204" y="708.8203"/><polygon fill="#A80036" points="97.5,113.4297,107.5,117.4297,97.5,121.4297,101.5,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="35.5" x2="103.5" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="42.5" y="112.3638">Start</text><path d="M38,132.4297 L176,132.4297 L176,139.4297 L166,149.4297 L38,149.4297 L38,132.4297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="445.8594" style="stroke: #000000; stroke-width: 2.0;" width="481" x="38" y="132.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="53" y="145.4966">Setup Phase</text><path d="M48,154.5625 L48,179.5625 L166,179.5625 L166,164.5625 L156,154.5625 L48,154.5625 " fill="#FBFB77" filter="url(#fj2iq7kdcx0b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M156,154.5625 L156,164.5625 L166,164.5625 L156,154.5625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="54" y="171.6294">After bookends</text><polygon fill="#A80036" points="192,205.8281,202,209.8281,192,213.8281,196,209.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109.5" x2="198" y1="209.8281" y2="209.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="116.5" y="204.7622">Start</text><path d="M136,224.8281 L217,224.8281 L217,231.8281 L207,241.8281 L136,241.8281 L136,224.8281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="278.1953" style="stroke: #000000; stroke-width: 2.0;" width="373" x="136" y="224.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="151" y="237.895">Loop</text><polygon fill="#A80036" points="413,274.2266,423,278.2266,413,282.2266,417,278.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="214" x2="419" y1="278.2266" y2="278.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="221" y="258.0278">Download cache(s)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="221" y="273.1606">for job</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="214" x2="256" y1="307.3594" y2="307.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="256" y1="307.3594" y2="320.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="215" x2="256" y1="320.3594" y2="320.3594"/><polygon fill="#A80036" points="225,316.3594,215,320.3594,225,324.3594,221,320.3594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="221" y="302.2935">Test for mountpoint</text><path d="M146,335.3594 L210,335.3594 L210,342.3594 L200,352.3594 L146,352.3594 L146,335.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="160.6641" style="stroke: #000000; stroke-width: 2.0;" width="268" x="146" y="335.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="161" y="348.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="225" y="347.5698">[If mounpoint doesn't exists]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="214" x2="256" y1="388.7578" y2="388.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="256" y1="388.7578" y2="401.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="215" x2="256" y1="401.7578" y2="401.7578"/><polygon fill="#A80036" points="225,397.7578,215,401.7578,225,405.7578,221,401.7578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="221" y="368.5591">Create cache</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="221" y="383.6919">target mountpoint</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="214" x2="256" y1="430.8906" y2="430.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="256" y1="430.8906" y2="443.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="215" x2="256" y1="443.8906" y2="443.8906"/><polygon fill="#A80036" points="225,439.8906,215,443.8906,225,447.8906,221,443.8906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="221" y="425.8247">Extract</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="146" x2="414" y1="452.8906" y2="452.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="214" x2="256" y1="475.0234" y2="475.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="256" y1="475.0234" y2="488.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="215" x2="256" y1="488.0234" y2="488.0234"/><polygon fill="#A80036" points="225,484.0234,215,488.0234,225,492.0234,221,488.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="221" y="469.9575">Merge recursively</text><polygon fill="#A80036" points="120.5,527.1563,110.5,531.1563,120.5,535.1563,116.5,531.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="114.5" x2="208" y1="531.1563" y2="531.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="126.5" y="526.0903">Done</text><path d="M59,544.1563 L59,569.1563 L156,569.1563 L156,554.1563 L146,544.1563 L59,544.1563 " fill="#FBFB77" filter="url(#fj2iq7kdcx0b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M146,544.1563 L146,554.1563 L156,554.1563 L146,544.1563 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="65" y="561.2231">Report start</text><path d="M56,590.2891 L56,615.2891 L477,615.2891 L477,600.2891 L467,590.2891 L56,590.2891 " fill="#FBFB77" filter="url(#fj2iq7kdcx0b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M467,590.2891 L467,600.2891 L477,600.2891 L467,590.2891 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="225.5" y="607.356">User steps</text><path d="M38,631.4219 L205,631.4219 L205,638.4219 L195,648.4219 L38,648.4219 L38,631.4219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="344.4609" style="stroke: #000000; stroke-width: 2.0;" width="491" x="38" y="631.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="53" y="644.4888">Teardown phase</text><path d="M48,653.5547 L48,678.5547 L166,678.5547 L166,663.5547 L156,653.5547 L48,653.5547 " fill="#FBFB77" filter="url(#fj2iq7kdcx0b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M156,653.5547 L156,663.5547 L166,663.5547 L156,653.5547 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="54" y="670.6216">After bookends</text><polygon fill="#A80036" points="192,704.8203,202,708.8203,192,712.8203,196,708.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109.5" x2="198" y1="708.8203" y2="708.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="116.5" y="703.7544">Start</text><path d="M136,723.8203 L217,723.8203 L217,730.8203 L207,740.8203 L136,740.8203 L136,723.8203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="176.7969" style="stroke: #000000; stroke-width: 2.0;" width="383" x="136" y="723.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="151" y="736.8872">Loop</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="214" x2="256" y1="762.0859" y2="762.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="256" y1="762.0859" y2="775.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="215" x2="256" y1="775.0859" y2="775.0859"/><polygon fill="#A80036" points="225,771.0859,215,775.0859,225,779.0859,221,775.0859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="221" y="757.02">Test if cache content changed</text><path d="M146,790.0859 L210,790.0859 L210,797.0859 L200,807.0859 L146,807.0859 L146,790.0859 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="103.5313" style="stroke: #000000; stroke-width: 2.0;" width="363" x="146" y="790.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="161" y="803.1528">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="225" y="802.2964">[If changed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="214" x2="256" y1="828.3516" y2="828.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="256" y1="828.3516" y2="841.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="215" x2="256" y1="841.3516" y2="841.3516"/><polygon fill="#A80036" points="225,837.3516,215,841.3516,225,845.3516,221,841.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="221" y="823.2856">Compress cache target(s).</text><polygon fill="#A80036" points="413,881.6172,423,885.6172,413,889.6172,417,885.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="214" x2="419" y1="885.6172" y2="885.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="221" y="865.4185">Upload cache(s)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="221" y="880.5513">for job</text><polygon fill="#A80036" points="120.5,924.75,110.5,928.75,120.5,932.75,116.5,928.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="114.5" x2="208" y1="928.75" y2="928.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="126.5" y="923.6841">Done</text><path d="M54,941.75 L54,966.75 L161,966.75 L161,951.75 L151,941.75 L54,941.75 " fill="#FBFB77" filter="url(#fj2iq7kdcx0b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M151,941.75 L151,951.75 L161,951.75 L151,941.75 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="60" y="958.8169">Report status</text><!--
@startuml
actor Worker as worker
participant Director as director
participant "Cache Driver" as cd
participant "Build Cache Server" as bcs

worker -> director: Start

group Setup Phase
    note over director: After bookends
    director -> cd: Start
    activate cd
    
    group Loop 
        cd -> bcs: Download cache(s)\nfor job
        cd -> cd: Test for mountpoint
        alt If mounpoint doesn't exists
            cd -> cd: Create cache\ntarget mountpoint
            cd -> cd: Extract
        else 
            cd -> cd: Merge recursively
        end
    end
    cd -> director: Done
    deactivate cd
    note over director: Report start
end
note over director, bcs: User steps
group Teardown phase
    note over director: After bookends
    director -> cd: Start
    activate cd
    
    group Loop
        cd -> cd: Test if cache content changed
        alt If changed 
            cd -> cd: Compress cache target(s).
            cd -> bcs : Upload cache(s)\nfor job
        end
    end
    cd -> director: Done
    deactivate cd
    note over director: Report status
end
@enduml

PlantUML version 1.2018.08(Sun Jun 24 12:31:00 UTC 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_171-8u171-b11-1~deb9u1-b11
Operating System: Linux
OS Version: 4.17.1-1-default
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>